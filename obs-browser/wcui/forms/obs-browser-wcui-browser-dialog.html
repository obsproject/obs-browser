<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
	<h1>Connect to Streaming Service</h1>
	<ul>
		<li>
			<a href="http://www.streamelements.com/">Stream Elements</a>
		</li>
	</ul>

	<h1>Test API calls</h1>
	<ul>
		<li><a href="#" onclick="test_videoEncoders(); return false">Get Video Encoders</a></li>
		<li><a href="#" onclick="test_audioEncoders(); return false">Get Audio Encoders</a></li>
		<li><a href="#" onclick="test_videoInputSources(); return false">Get Video Input Sources</a></li>
		<li><a href="#" onclick="test_setupEnvironment(); return false">setupEnvironment</a></li>
	</ul>

	<h1>API Call Response</h1>
	<div id="apiCallName"></div>
	<div id="apiCallResponseContent"></div>

	<script type="text/javascript">
		function showApiCallResponse(apiCallName, apiCallResponseContent) {
			document.getElementById("apiCallName").innerText = apiCallName;
			document.getElementById("apiCallResponseContent").innerText = JSON.stringify(apiCallResponseContent);
		}

		showApiCallResponse("No call", "No response");

		function test_videoEncoders() {
			window.obsstudio.videoEncoders(function (result) {
				showApiCallResponse("videoEncoders", result);
			});
		}

		function test_audioEncoders() {
			window.obsstudio.audioEncoders(function (result) {
				showApiCallResponse("audioEncoders", result);
			});
		}

		function test_videoInputSources() {
			window.obsstudio.videoInputSources(function (result) {
				showApiCallResponse("videoInputSources", result);
			});
		}

		function test_setupEnvironment() {
			var config = {
				"input": {
					"scenes": [
						{
							"name": "Scene 1",
							"sources":
							[
								{
									"type": "game",
									"name": "Game Capture",

									"multiGpuCompatibility": true,
									"allowTransparency": false,
									"limitFramerate": true,
									"captureCursor": false,
									"antiCheatHook": true,
									"captureOverlays": true
								},
								{
									"type": "browser",
									"name": "Browser",

									"url": "http://streamelements.com/",

									"shutdownWhenInactive": false
								},
								{
									"type": "video_capture",
									"name": "Video Capture",

									"left": 10,
									"top": 10,
									"width": 320,
									"height": 240
								}
							]
						},
						{
							"name": "Scene 2",
							"sources":
							[
								{
									"type": "game",
									"name": "Game Capture",

									"multiGpuCompatibility": false,
									"allowTransparency": false,
									"limitFramerate": false,
									"captureCursor": false,
									"antiCheatHook": false,
									"captureOverlays": false
								},
								{
									"type": "browser",
									"name": "Browser",

									"url": "http://www.google.com/",

									"shutdownWhenInactive": false
								},
								{
									"type": "video_capture",
									"name": "Video Capture",

									"left": 1590,
									"top": 830,
									"width": 320,
									"height": 240
								}
							]
						}
					]
				},
				"output": {
					"defaultSceneName": "Scene 1",
					"audio": {
						"bitRate": 128,
						"sampleRate": 44100,
						"channels": 2
					},
					"video": {
						"bitRate": 2500,
						"codec": "obs_qsv11",
						"framesPerSecond": 24,
						"keyframeIntervalSeconds": 1,
						"width": 1920,
						"height": 1080
					},
					"stream": {
						"serverUrl": "rtmp://localhost/autoapp",
						"streamKey": "autoStreamKey",
						"useAuth": true,
						"username": "username",
						"password": "password",
						"autoStart": true,
						"reconnectOnFailure": true,
						"reconnectRetryDelaySeconds": 5,
						"reconnectRetryMaxAttempts": 1000
					}
				}
			};

			showApiCallResponse("setupEnvironment", config);

			window.obsstudio.setupEnvironment(config);
		}
	</script>
</body>
</html>
